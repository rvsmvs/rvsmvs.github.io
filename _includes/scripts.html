<!-- Mermaid (diagrams) -->
<script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>

<!-- Copy button for code blocks -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('pre > code').forEach(code => {
    const btn = document.createElement('button');
    btn.textContent = 'Copy';
    btn.ariaLabel = 'Copy code to clipboard';
    btn.onclick = async () => {
      try {
        await navigator.clipboard.writeText(code.innerText);
        const old = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = old, 1000);
      } catch (e) {
        alert('Clipboard not available');
      }
    };
    const pre = code.parentElement;
    pre.style.position = 'relative';
    btn.style.position = 'absolute';
    btn.style.top = '8px';
    btn.style.right = '8px';
    pre.appendChild(btn);
  });
});
</script>
