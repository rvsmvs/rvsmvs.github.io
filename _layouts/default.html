<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}" data-theme="{{ site.bg_color | default: "auto" }}">
  <head>
    <!-- Google tag (gtag.js) -->
    {% if site.gtag  %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.gtag }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{ site.gtag }}');
    </script>
    {% endif  %}
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Meta content -->
    {% if site.bg_color == "dark" %}
    <meta name="theme-color" content="#13171F" />
    {% endif %}
    <meta name="color-scheme" content="light dark" />
    <meta name="description" content="{{ site.description }}" />
    <meta name="keywords" content="{{ site.keywords }}" />
    <meta property="og:title" content="{{ site.title }}" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ site.url | default: site.github.url }}" />
    <meta property="og:description" content="{{ site.description }}" />
    <meta property="og:image" content="{{ 'assets/img/preview.png' | relative_url }}" />

    <title>{{ site.title }}</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ "assets/img/favicon.png" | relative_url }}">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@800&display=swap"
      rel="stylesheet"
    />
    <!-- Pico.css from CDN -->
    <link
      rel="stylesheet"
      {% if site.theme_color and site.theme_color != "azure" %}
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.{{ site.theme_color }}.min.css"
      {% else %}
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.classless.min.css"
      {% endif %}
    />
    <!-- Base styles -->
    <link rel="stylesheet" href="{{ "assets/css/styles.css" | relative_url }}">
    <!-- Code highlight styles -->
    <link rel="stylesheet" href="{{ "assets/css/base16.solarized.css" | relative_url }}">
    <!-- Custom styles -->
    <link rel="stylesheet" href="{{ "assets/css/custom.css" | relative_url }}">
  </head>

  <body>
    <!-- Header section -->
    <header class="site-header">
      <nav>
        <strong class="site-title"><a href="{{ '/' | relative_url }}">{{ site.title }}</a></strong>
        <a href="#resources">Resources</a>
        <a href="#goals">Goals</a>
        <span class="spacer"></span>
        <button id="theme-toggle" class="contrast outline" aria-label="Toggle theme" title="Toggle theme">☾</button>
      </nav>
    </header>
    <!-- Hero section -->
    <section class="hero">
      <div class="container">
        <h1>{{ site.title }}</h1>
        <p class="subtitle">{{ site.description }}</p>
      </div>
    </section>
    <!-- Main section -->
    <main class="container content">
      <!-- README.md starts from here -->
      {{ content }}
      <!-- README.md ends here -->
    </main>
    <!-- Footer section -->
    <footer class="site-footer">
      <div class="container">
        <small>© <span id="year"></span> • {{ site.title }}</small>
      </div>
    </footer>
    <script>
      (function() {
        const root = document.documentElement;
        const btn = document.getElementById('theme-toggle');
        const STORAGE_KEY = 'site-theme';

        function applyTheme(theme) {
          if (!theme) return;
          root.setAttribute('data-theme', theme);
          if (btn) { btn.textContent = theme === 'dark' ? '☀' : '☾'; }
        }

        const stored = localStorage.getItem(STORAGE_KEY);
        if (stored === 'dark' || stored === 'light') {
          applyTheme(stored);
        } else {
          applyTheme(root.getAttribute('data-theme'));
        }

        if (btn) {
          btn.addEventListener('click', function() {
            const current = root.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
            const next = current === 'dark' ? 'light' : 'dark';
            localStorage.setItem(STORAGE_KEY, next);
            applyTheme(next);
          });
        }

        var y = document.getElementById('year');
        if (y) { y.textContent = new Date().getFullYear(); }
      })();
    </script>
  </body>
</html>
